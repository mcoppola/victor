!function(t){var e={};function n(s){if(e[s])return e[s].exports;var r=e[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,s){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(s,r,function(e){return t[e]}.bind(null,r));return s},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);const s=t=>{t.width=window.innerWidth,t.height=window.innerHeight},r=t=>{window.addEventListener("resize",e=>s(t),!1),s(t)},i=t=>{window.addEventListener("load",t=>{let e=document.getElementsByTagName("canvas")[0];r(e)},!1),r(canvas)},o=t=>{var e={x:window.outerWidth/2,y:window.outerHeight/2};return t.addEventListener("mousemove",function(n){var s,r;n.pageX||n.pageY?(s=n.pageX,r=n.pageY):(s=n.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,r=n.clientY+document.body.scrollTop+document.documentElement.scrollTop),s-=t.offsetLeft,r-=t.offsetTop,e.x=s,e.y=r},!1),e},u=()=>{window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)})};class a{constructor(t){this.canvas=t.canvas,this.ctx=this.canvas.getContext("2d"),this.width=this.canvas.width,this.height=this.canvas.height,this.depth=2e3,this.frame=[this.width,this.height,this.depth],this.shiftX=1,this.shiftY=1,this.mouseLastPos={x:window.outerWidth/2,y:window.outerHeight/2},this.mouse=o(this.canvas),this.mouseFactor=.003}play(){this.mouseCheck(),this.clear()}clear(){this.ctx.clearRect(0,0,this.width,this.height)}mouseCheck(){this.mouse&&(this.mouse.x>this.mouseLastPos.x?this.shiftX+=this.mouseFactor*(this.mouse.x-this.mouseLastPos.x):this.mouse.x<this.mouseLastPos.x&&(this.shiftX-=this.mouseFactor*(this.mouseLastPos.x-this.mouse.x)),this.mouse.y>this.mouseLastPos.y?this.shiftY-=this.mouseFactor*(this.mouse.y-this.mouseLastPos.y):this.mouse.y<this.mouseLastPos.y&&(this.shiftY+=this.mouseFactor*(this.mouseLastPos.y-this.mouse.y)),this.mouseLastPos={x:this.mouse.x,y:this.mouse.y})}}class c{constructor(t){i(window),this.canvas=t.canvas,this.view=new a({canvas:this.canvas}),this.scene=t.scene,this.scene.setView(this.view),this.init()}init(){u();const t=(e=>{window.requestAnimationFrame(t,canvas),this.play()}).bind(this);t()}setScene(t){this.scene=t}play(){this.view.play();for(let t=0;t<this.scene.assets.length;t+=1)this.scene.assets[t].draw()}}class h{constructor(t){this.geo=t.geo||[],this.pos=t.pos||[0,0,0],this.scale=t.scale||10,this.style=t.style}setModelScale(t){return[t[0]*this.scale,t[1]*this.scale,t[2]*this.scale]}moveToScenePos(t){return[this.pos[0]+t[0],this.pos[1]+t[1],this.pos[2]+t[2]]}pointTo3D(t){let{height:e,width:n,depth:s,shiftX:r,shiftY:i}=this.view;return[t[0]+t[2]/s*(n*r/2-t[0]),t[1]+t[2]/s*(e*i/2-t[1])]}}function l(t,e){switch(t){case 0:return function(){return e.apply(this,arguments)};case 1:return function(t){return e.apply(this,arguments)};case 2:return function(t,n){return e.apply(this,arguments)};case 3:return function(t,n,s){return e.apply(this,arguments)};case 4:return function(t,n,s,r){return e.apply(this,arguments)};case 5:return function(t,n,s,r,i){return e.apply(this,arguments)};case 6:return function(t,n,s,r,i,o){return e.apply(this,arguments)};case 7:return function(t,n,s,r,i,o,u){return e.apply(this,arguments)};case 8:return function(t,n,s,r,i,o,u,a){return e.apply(this,arguments)};case 9:return function(t,n,s,r,i,o,u,a,c){return e.apply(this,arguments)};case 10:return function(t,n,s,r,i,o,u,a,c,h){return e.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function f(t,e){return function(){return e.call(this,t.apply(this,arguments))}}function d(t){return null!=t&&"object"==typeof t&&!0===t["@@functional/placeholder"]}function p(t){return function e(n){return 0===arguments.length||d(n)?e:t.apply(this,arguments)}}function y(t){return function e(n,s){switch(arguments.length){case 0:return e;case 1:return d(n)?e:p(function(e){return t(n,e)});default:return d(n)&&d(s)?e:d(n)?p(function(e){return t(e,s)}):d(s)?p(function(e){return t(n,e)}):t(n,s)}}}function w(t){return function e(n,s,r){switch(arguments.length){case 0:return e;case 1:return d(n)?e:y(function(e,s){return t(n,e,s)});case 2:return d(n)&&d(s)?e:d(n)?y(function(e,n){return t(e,s,n)}):d(s)?y(function(e,s){return t(n,e,s)}):p(function(e){return t(n,s,e)});default:return d(n)&&d(s)&&d(r)?e:d(n)&&d(s)?y(function(e,n){return t(e,n,r)}):d(n)&&d(r)?y(function(e,n){return t(e,s,n)}):d(s)&&d(r)?y(function(e,s){return t(n,e,s)}):d(n)?p(function(e){return t(e,s,r)}):d(s)?p(function(e){return t(n,e,r)}):d(r)?p(function(e){return t(n,s,e)}):t(n,s,r)}}}var m=Array.isArray||function(t){return null!=t&&t.length>=0&&"[object Array]"===Object.prototype.toString.call(t)};var g=p(function(t){return!!m(t)||!!t&&("object"==typeof t&&(!function(t){return"[object String]"===Object.prototype.toString.call(t)}(t)&&(1===t.nodeType?!!t.length:0===t.length||t.length>0&&(t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1)))))}),v=function(){function t(t){this.f=t}return t.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},t.prototype["@@transducer/result"]=function(t){return t},t.prototype["@@transducer/step"]=function(t,e){return this.f(t,e)},t}();var b=y(function(t,e){return l(t.length,function(){return t.apply(e,arguments)})});function x(t,e,n){for(var s=n.next();!s.done;){if((e=t["@@transducer/step"](e,s.value))&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}s=n.next()}return t["@@transducer/result"](e)}function P(t,e,n,s){return t["@@transducer/result"](n[s](b(t["@@transducer/step"],t),e))}var S="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";function A(t,e,n){if("function"==typeof t&&(t=function(t){return new v(t)}(t)),g(n))return function(t,e,n){for(var s=0,r=n.length;s<r;){if((e=t["@@transducer/step"](e,n[s]))&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}s+=1}return t["@@transducer/result"](e)}(t,e,n);if("function"==typeof n["fantasy-land/reduce"])return P(t,e,n,"fantasy-land/reduce");if(null!=n[S])return x(t,e,n[S]());if("function"==typeof n.next)return x(t,e,n);if("function"==typeof n.reduce)return P(t,e,n,"reduce");throw new TypeError("reduce: list must be array or iterable")}var L=w(A);function T(t,e){return function(){var n=arguments.length;if(0===n)return e();var s=arguments[n-1];return m(s)||"function"!=typeof s[t]?e.apply(this,arguments):s[t].apply(s,Array.prototype.slice.call(arguments,0,n-1))}}var _=p(T("tail",w(T("slice",function(t,e,n){return Array.prototype.slice.call(n,t,e)}))(1,1/0)));function j(){if(0===arguments.length)throw new Error("pipe requires at least one argument");return l(arguments[0].length,L(f,arguments[0],_(arguments)))}class k extends h{draw(){let t=this.view.height;for(let e=0;e<this.geo.length;e+=1){this.view.ctx.fillStyle=this.style.fill,this.view.ctx.strokeStyle=this.style.stoke,this.view.ctx.lineWidth=this.style.lineWidth||1,this.view.ctx.beginPath();for(let n=0;n<this.geo[e].length;n+=1){let s=j(this.setModelScale.bind(this),this.moveToScenePos.bind(this))(this.geo[e][n]),[r,i]=this.pointTo3D(s,this.view);0===n?this.view.ctx.moveTo(r,-i+t):this.view.ctx.lineTo(r,-i+t)}this.view.ctx.closePath(),this.style.fill&&this.view.ctx.fill(),this.style.stroke&&this.view.ctx.stroke()}}}class F{constructor(t){this.assets=t||[],this.orderAssetsByDepth()}setView(t){this.assets=this.assets.map(e=>Object.assign({view:t,__proto__:e.__proto__},e))}add(t){typeof t===Array?this.assets=this.assets+t:this.assets[this.assets.length]=t,this.orderAssetsByDepth()}remove(t){let e=this.assets.indexOf(t);this.assets.splice(e,1)}orderAssetsByDepth(){this.assets=this.assets.sort((t,e)=>t.background?1:e.pos[2]-t.pos[2])}}window.onload=(()=>{let t=document.getElementsByTagName("canvas")[0],e=window.outerWidth,n=(window.height,new k({geo:[[[0,0,0],[0,0,1e3],[0,0,1e3],[e,0,1e3],[e,0,0]]],pos:[0,0,0],background:!0,style:{fill:"rgba(80,80,80, 0.8)"},scale:1})),s=new k({geo:[[[0,0,0],[0,5,0],[5,5,0],[5,0,0]]],pos:[0,0,500],style:{fill:"rgba(255,0,0,0.5)",stroke:"#000",lineWidth:5},scale:100}),r=new k({geo:[[[0,0,0],[0,10,0],[5,5,0],[5,0,0]]],pos:[0,0,1200],style:{fill:"#4d88eb",stroke:"#000"},scale:100}),i=new F([n,s,r]);new c({canvas:t,scene:i})})}]);